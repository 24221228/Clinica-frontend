<app-layout>
    <div class="bg-transparent">
        <!--Cards-->
        <div class="row row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 container-cards m-0 mt-2 p-3">
            <app-card *ngFor="let card of cardData" [title]="card[0]" [description]="card[2]" [amount]="card[1]" [icon]="card[3]" [colorBG]="card[4]"></app-card>
        </div>
        <!--Cuadros estadisticos-->
        <div id="container-statistical-graphs" class="row row-cols-lg-1 m-0">
            <div class="col-12 p-4 m-0 d-lg-flex justify-content-between">
                <div id="container-dating-figures" class="col-lg-7 col-md-7 col-sm-12 col-12 rounded-3 p-3">
                    <h5 class="m-0 text-white mt-0 mb-3">Cifras de Citas</h5>
                    <div>
                        <canvas baseChart width="400" height="320"
                            [type]="'line'"
                            [data]="lineChartData"
                            [options]="lineChartOptions"
                            [legend]="true">
                        </canvas>
                    </div>
                </div>
                <div id="container-dating-statistics" class="col-lg-4 col-md-5 col-sm-12 col-12 rounded-3 p-3">
                    <h5 class="m-0 text-white mt-0 mb-3">Estadisticas de Citas</h5>
                    <div class="mb-4">
                        <canvas baseChart height="173" width="194"
                                [labels]="doughnutChartLabels"
                                [datasets]="datasetsPieChart"
                                [options]="doughnutChartOptions"
                                [type]="'doughnut'"
                                [legend]="false">
                        </canvas>
                    </div>
                    <div class="d-flex justify-content-between p-1 border-top border-bottom">
                        <p class="text-white m-0">Nuevas Citas</p>
                        <p class="text-white m-0 border p-1">25%</p>
                    </div>
                    <div class="d-flex justify-content-between p-1 border-top border-bottom">
                        <p class="text-white m-0">Citas Completadas</p>
                        <p class="text-white m-0 border p-1">43%</p>
                    </div>
                    <div class="d-flex justify-content-between p-1 border-top border-bottom">
                        <p class="text-white m-0">Citas Pendientes</p>
                        <p class="text-white m-0 border p-1">32%</p>
                    </div>
                </div>
            </div>
            <div class="col-12 p-4 m-0 d-lg-flex justify-content-between">
                <div id="container-customer-statistics" class="col-lg-5 col-md-6 col-sm-12 col-12 rounded-3 p-3">
                    <h5 class="m-0 text-white mt-0 mb-3">Estadisticas de Servicios del mes</h5>
                    <div>
                        <canvas baseChart
                                width="500"
                                height="250"
                                [type]="'pie'"
                                [datasets]="pieChartDatasets"
                                [labels]="pieChartLabels"
                                [options]="pieChartOptions"
                                [legend]="true">
                        </canvas>
                    </div>
                </div>
                <div id="container-dating-actions" class="col-lg-6 col-md-6 col-sm-12 col-12 rounded-3 p-3">
                    <h5 class="m-0 text-white mt-0 mb-3">Egresos vs Ingresos</h5>
                    <div>
                        <canvas baseChart
                                width="500"
                                height="250"
                                [type]="'bar'"
                                [datasets]="barChartDatasets"
                                [labels]="barChartLabels"
                                [options]="barChartOptions"
                                [legend]="true">
                        </canvas>
                    </div>
                </div>
            </div>
        </div>
        <!--Cards Top--->
        <div class="row row-cols-lg-5 m-0">
            <div class="col-lg-4 p-4">
                <div class="rounded-3 container-top-services p-3">
                    <h5 class="m-0 text-white mt-0 mb-2">Top servicios del mes</h5>
                    <div id="container-top-services_body" class="overflow-x-auto">
                        <div class="col-lg-12 border-bottom mt-1 p-3" *ngFor="let especialidad of top7Especialidades">
                            <div class="row row-cols-lg-2 m-0">
                                <p class="text-white m-0 mb-1 text-start">{{especialidad.service}}</p>
                                <p class="text-white m-0 mb-1 text-end">{{especialidad.percentaje}}</p>
                            </div>
                            <div class="progress" role="progressbar" aria-label="Success example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                                <div class="progress-bar bg-gradient-purple" style="width: 25%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 p-4">
                <div class="rounded-3 container-top-services p-3">
                    <h5 class="m-0 text-white mt-0 mb-2">Top pacientes del mes</h5>
                    <div id="container-top-services_body" class="overflow-x-auto">
                        <div class="col-lg-12 mt-1 p-3 d-flex" *ngFor="let paciente of top7Pacientes">
                            <div class="col-lg-3">
                                <img id="user-photo" src="../../../../assets/image/girl.png" alt="user" class="rounded-circle bg-danger">
                            </div> 
                            <div class="col-lg-6 d-flex place-items-center">
                                <p class="mb-0 text-white fw-bold">{{paciente.name}}</p>
                            </div>
                            <div class="col-lg-3 d-flex justify-content-center place-items-center">
                                <p class="text-white mb-0">{{paciente.citasCount}} citas</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 p-4">
                <div class="rounded-3 container-top-services p-3">
                    <h5 class="m-0 text-white mt-0 mb-2">Top especialistas del mes</h5>
                    <div id="container-top-services_body" class="overflow-x-auto">
                        <div class="col-lg-12 mt-1 p-3 d-flex" *ngFor="let paciente of top7Pacientes">
                            <div class="col-lg-3">
                                <img id="user-photo" src="../../../../assets/image/girl.png" alt="user" class="rounded-circle bg-danger">
                            </div>
                            <div class="col-lg-6 d-flex flex-column">
                                <p class="mb-0 text-white fw-bold">{{paciente.name}}</p>
                                <p id="specialistScoreText" class="text-white fw-lighter mb-0">ID #{{paciente.idUsuario}}</p>
                            </div>
                            <div class="col-lg-3 d-flex justify-content-center place-items-center">
                                <p class="text-white mb-0">{{paciente.citasCount}}</p>
                                <span class="ms-2"><i class="bi bi-star-fill text-warning"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Tabla de citas recientes-->
        <div class="row row-cols-lg-1 m-4">
            <div id="container-appointments-recent" class="col-lg-12 p-4 rounded-3">
                <h5 class="m-0 text-white mt-0 mb-3">Citas Recientes</h5>
                <div class="table-responsive">
                    <table class="table">
                        <thead class="table-light">
                            <tr>
                                <td>Codigo</td>
                                <td>Nombres y Apellidos</td>
                                <td>Servicio</td>
                                <td>Fecha</td>
                                <td>Acciones</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let cita of ultimas10Citas">
                                <td class="text-white bg-transparent">{{cita.id}}</td>
                                <td class="text-white bg-transparent">{{cita.name}}</td>
                                <td class="text-white bg-transparent">{{cita.service}}</td>
                                <td class="text-white bg-transparent">{{cita.date | date:'yyyy-MM-dd'}}</td>
                                <td class="bg-transparent">
                                    <button class="btn btn-primary">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</app-layout>